# Shop Project

Проект интернет-магазина с системой управления товарами и категориями.

## Основная функциональность

### Классы

#### Базовые классы
- **`BaseProduct`** (абстрактный класс)
  - Абстрактные методы:
    - `__init__`, `__str__`, `__add__`
    - Свойство `price` с геттером/сеттером
    - Класс-метод `new_product()`

- **`BaseOrderCategory`** (абстрактный класс)
  - Общая функциональность для заказов и категорий
  - Абстрактные методы:
    - `total_cost` (итоговая стоимость)
    - `__str__` (строковое представление)

#### Основные классы
- **`Product`** (товар)
  - Наследует `BaseProduct` и `LogCreationMixin`
  - Особенности:
    - Автоматическая проверка цены (не может быть ≤ 0)
    - Подтверждение при понижении цены
    - Логирование создания объектов
    - Сложение товаров через `__add__` (цена × количество)

- **`Category`** (категория)
  - Наследует `BaseOrderCategory`
  - Особенности:
    - Поддержка итерации по товарам
    - Автоматический подсчет товаров
    - Форматированный вывод списка товаров

- **`Order`** (заказ)
  - Наследует `BaseOrderCategory`
  - Особенности:
    - Содержит один товар и его количество
    - Расчет итоговой стоимости
    - Проверка корректности количества

- **`LogCreationMixin`** (миксин)
  - Логирует создание объектов
  - Выводит параметры конструктора

#### Дочерние классы товаров
- **`Smartphone`** (смартфон)
- **`LawnGrass`** (газонная трава)


### Дополнительные возможности

- **Защита данных**:
  - Приватные атрибуты с контролируемым доступом
  - Валидация входных параметров
  - Подтверждение критических операций

- **Работа с данными**:
  - Загрузка из JSON (`data/products.json`)
  - Автоматические счетчики товаров/категорий
  - Гибкое строковое представление объектов

- **Тестирование**:
  - Полное покрытие основных сценариев
  - Проверка граничных случаев
  - Модульные и интеграционные тесты


## Тестирование

### Команды
```bash
# Запуск всех тестов
pytest tests/

# Проверка покрытия
coverage run -m pytest tests/
coverage report -m

# Проверка типов
mypy --strict src/
```


### Покрытие тестами

- Основная функциональность: 100%
- Граничные случаи: 95%+
- Общее покрытие: >90%


## Запуск проекта

1. Установить зависимости:
   ```bash
   poetry install
   ```
2. Запустить тесты:
   ```bash
   pytest tests/
   ```
3. Запустить основной скрипт:
    ```bash
   python main.py
   ```
   

## Структура проекта

shop_project/
├── data/                  # Данные в JSON
├── src/
│   ├── models/
│   │   ├── base_order_category.py  # Базовый класс
│   │   ├── product.py     # Товары
│   │   ├── category.py    # Категории
│   │   ├── order.py       # Заказы
│   │   └── ... 
├── tests/
│   ├── test_product.py
│   ├── test_category.py
│   ├── test_order.py
│   └── ...
└── README.md


## Требования

- Python 3.9+
- Зависимости:
  - pytest (тестирование)
  - coverage (покрытие кода)
  - mypy (проверка типов)
  - poetry (управление зависимостями)
